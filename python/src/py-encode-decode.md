# py 编码

[python: 数据类型, 编码方式](https://blog.csdn.net/qq_40967086/article/details/126633267)

## python中`\u`,`\x`,`0x`

`\u` :  python3中, 字符在内存里的表示是 `unicode`.
所以看到 `\u` 代表目前是`unicode`编码. 例如;

```python
'中文' == '\u4e2d\u6587'
```

一般`unicode`中一个中文字符对应两个字节(每字节8 `bit`).
这里为了人眼看, 计算机一般显示 `16` 进制.

+ `0x` :  表示十六进制的 `int型` 变量.
例如 `0x61` 表示 `int` 型的 `97`

+ `\x` :  表示十六进制的 `字符型` 变量.
例如 `'\x61'` 表示 `str` 型, `ASCII` 码为十进制97的字符, 即 `'a'`.
换句话说 `'\x61' == chr(97)`

## 字符串前面加 `u`,`r`,`b`的含义

### `u/U`: 表示 `unicode` 字符串

不仅仅针对中文, 可以针对任何的字符串, 代表是对字符串进行 `unicode` 编码.

一般英文字符在使用各种编码下, 基本都可以正常解析, 所以一般不带 `u`;
但涉及中文时必须标明所需编码, 否则一旦编码转换就会出现乱码.  建议所有编码方式采用 `utf8`.
在 python3中, 字符串默认创建即以 `Unicode` 编码存储, 自然便可以存储中文.

+ 例一

```python
u"我是含有中文字符组成的字符串. "
```

作用: 后面字符串以 `Unicode` 格式 进行编码, 一般用在中文字符串前面,
防止因为源码储存格式问题, 导致再次使用时出现乱码.

+ 例子二

```python
string = 'a'  #等效于
string = u'a'
```

Unicode中通常每个字符由2个字节表示.  `u'a'` 即 `u'\u0061'` 实际内存中为

    [0000 0000] [0110 0001]

### r/R:表示非转义的原始字符串

除了普通字符之外, 字符串中还可能包括  `转义字符`,
比如最常见的 `"\n"` 表示换行, `"\t"` 表示 `Tab` 等.
而如果是以 `r` 开头, 那么说明后面的字符都是普通字符(raw character),
即 `r"\n"` 表示 `反斜杠字符+ 字母n`, 而不表示 `换行`.

以 `r` 开头的字符, 常用于 `正则表达式`(`re` 模块). 例如:

```python
r"\n\n\n\n"　　# 表示一个普通生字符串 \n\n\n\n, 而不表示换行了.
```

+ 作用: 去掉反斜杠的转移机制. (特殊字符: 即那些, 反斜杠加上对应字母,
表示对应的特殊含义的, 比如最常见的"\n"表示换行, "\t"表示Tab等.  )

+ 应用: 常用于正则表达式(`re` 模块), 推荐在正则表达式前加个 `r`.

### b:表示bytes类型字符串

+ `python3.x` 里, 默认的 `str` 是(py2.x里的)`unicode`,
bytes是(py2.x)的str,  `b""` 前缀代表的就是 `bytes`.
+ `python2.x` 里, `b前缀` 没什么具体意义,  只是为了兼容 `python3.x` 的这种写法.

+ 例一

```python
response = b'<h1\>Hello World!</h1>'     # b' ' 表示这是一个 bytes 对象
```

+ 作用: `b" "` 前缀表示: 后面字符串是 `bytes` 类型.
+ 用处: 网络编程中, 服务器和浏览器只认 `bytes` 类型数据.
如: `send` 函数的参数和 `recv` 函数的返回值都是 `bytes` 类型.

+ 例二

```python
result = b'你好20190101'
```

字符串存储为 `AscII` 码, 无法存储中文. 编译会报如下错误:

    SyntaxError: bytes can only contain ASCII literal characters.

### bytes 和 str 的转换

在 Python3 中, `bytes` 和 `str` 的互相转换方式是

```python
str.encode('utf-8')
bytes.decode('utf-8')

print(r'A\tA') 结果为A\tA
print(b'A\tA') 结果为b'A\tA'
print(u'A\tA') 结果为A A
```

注意: `b'A\tA'` 打印结果中自带一个 `b''`,表示该字符串是一个 `字节数组`
