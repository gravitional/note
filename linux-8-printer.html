<!DOCTYPE HTML>
<html lang="zh-CN" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>打印机 - linux</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="linux-1-daily.html"><strong aria-hidden="true">1.</strong> 日常使用</a></li><li class="chapter-item expanded "><a href="linux-1-exception.html"><strong aria-hidden="true">2.</strong> 报错维护</a></li><li class="chapter-item expanded "><a href="linux-1-systemd.html"><strong aria-hidden="true">3.</strong> systemd</a></li><li class="chapter-item expanded "><a href="linux-1-gnome.html"><strong aria-hidden="true">4.</strong> gnome 桌面</a></li><li class="chapter-item expanded "><a href="linux-2-process.html"><strong aria-hidden="true">5.</strong> unix-进程</a></li><li class="chapter-item expanded "><a href="linux-3-zsh-termux.html"><strong aria-hidden="true">6.</strong> zsh,termux</a></li><li class="chapter-item expanded "><a href="linux-3-package.html"><strong aria-hidden="true">7.</strong> linux 包管理</a></li><li class="chapter-item expanded "><a href="linux-5-owner.html"><strong aria-hidden="true">8.</strong> 权限,shell 环境</a></li><li class="chapter-item expanded "><a href="linux-6-network.html"><strong aria-hidden="true">9.</strong> 网络</a></li><li class="chapter-item expanded "><a href="linux-6-package-mount.html"><strong aria-hidden="true">10.</strong> 包管理,挂载</a></li><li class="chapter-item expanded "><a href="linux-7-tar-sync.html"><strong aria-hidden="true">11.</strong> 压缩,同步文件</a></li><li class="chapter-item expanded "><a href="linux-7-text-operation.html"><strong aria-hidden="true">12.</strong> 文本操作</a></li><li class="chapter-item expanded "><a href="linux-8-printer.html" class="active"><strong aria-hidden="true">13.</strong> 打印机</a></li><li class="chapter-item expanded "><a href="manjaro.html"><strong aria-hidden="true">14.</strong> manjaro</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">bash 手册</li><li class="chapter-item expanded "><a href="bash-1.html"><strong aria-hidden="true">15.</strong> bash常用命令</a></li><li class="chapter-item expanded "><a href="bash-2.html"><strong aria-hidden="true">16.</strong> bash 变量,脚本参数</a></li><li class="chapter-item expanded "><a href="bash-4.html"><strong aria-hidden="true">17.</strong> 内核风格</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">其他工具</li><li class="chapter-item expanded "><a href="awk.html"><strong aria-hidden="true">18.</strong> w3c awk</a></li><li class="chapter-item expanded "><a href="awk-2.html"><strong aria-hidden="true">19.</strong> awk another</a></li><li class="chapter-item expanded "><a href="linux-gpg.html"><strong aria-hidden="true">20.</strong> GnuPG</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">linux</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="linux-8"><a class="header" href="#linux-8">linux-8</a></h1>
<h2 id="第二十三章-打印"><a class="header" href="#第二十三章-打印">第二十三章: 打印</a></h2>
<ul>
<li><code>pr</code>: 转换需要打印的文本文件</li>
<li><code>lpr</code>: 打印文件</li>
<li><code>lp</code>: 打印文件(<code>System V</code>)</li>
<li><code>a2ps</code>: 为 <code>PostScript</code> 打印机格式化文件</li>
<li><code>lpstat</code>: 显示打印机状态信息</li>
<li><code>lpq</code>: 显示打印机队列状态</li>
<li><code>lprm</code>: 取消打印任务</li>
<li><code>cancel</code>: 取消打印任务(<code>System V</code>)</li>
</ul>
<h3 id="基于字符的打印机"><a class="header" href="#基于字符的打印机">基于字符的打印机</a></h3>
<p>80年代的打印机技术有两方面的不同.首先,那时的打印机基本上都是打击式打印机.打击式打印机使用撞针打击色带的机械结构在纸上形成字符.这种流行的技术造就了当时的菊轮式打印和点阵式打印.
其次,更重要的是,早期打印机的特点是它使用设备内部固定的一组字符集.比如,一台菊轮式打印机只能打印固定在其菊花轮花瓣上的字符,就这点而言打印机更像是高速打字机.
大部分打字机都使用等宽字体,意思是说每个字符的宽度相等,页面上只有固定的区域可供打印,而这些区域只能容纳固定的字符数.
大部分打印机采用横向<code>10</code>字符每英寸(CPI)和纵向<code>6</code>行每英寸(LPI)的规格打印,这样一张美式信片纸就有横向85字符宽纵向<code>66</code>行高,加上两侧的页边距,一行的最大宽度可达<code>80</code>字符.
据此,使用等宽字体就能提供所见即所得(WYSIWYG,What You See Is What You Get)的打印预览.</p>
<p>接着,一台类打字机的打印机会收到以简单字节流的形式传送来的数据,其中就包含要打印的字符.
例如要打印一个字母<code>a</code>,计算机就会发送 <code>ASCII</code> 码<code>97</code>,如果要移动打印机的滑动架和纸张,就需要使用回车, 换行, 换页等的小编号 <code>ASCII</code> 控制码.
使用控制码,还能实现一些之前受限制的字体效果,比如粗体,就是让打印机先打印一个字符,然后退格再打印一遍来得到颜色较深的效果的.
用 <code>nroff</code> 来产生一个手册页然后用 <code>cat -A</code> 检查输出,我们就能亲眼看看这种效果了:</p>
<pre><code class="language-bash">[me@linuxbox ~]$ zcat /usr/share/man/man1/ls.1.gz | nroff -man | cat -A | head
LS(1) User Commands LS(1)
$
...
l^Hls^Hs [_^HO_^HP_^HT_^HI_^HO_^HN]... [_^HF_^HI_^HL_^HE]...$
</code></pre>
<p><code>^H</code>(<code>ctrl-H</code>)字符是用于打印粗体效果的退格符.同样,我们还可以看到用于打印下划线效果的<code>[退格/下划线]</code>序列.
<code>groff</code>是一种文本格式化系统,类似轻量版的<code>LaTeX</code>. 参考<a href="https://linux.cn/article-9122-1.html">使用 groff 编写 man 手册页 </a></p>
<h3 id="图形化打印机"><a class="header" href="#图形化打印机">图形化打印机</a></h3>
<p>一台 <code>PostScript</code> 打印机接受 <code>PostScript</code> 程序作为输入.打印机有自己的处理器和内存(通常这让打印机比连接它的计算机更为强大),
能执行一种叫做 <code>PostScript</code> 解析器的特殊程序, 用于读取输入的 <code>PostScript</code> 程序并生成结果导入打印机的内存, 这样就形成了要转移到纸上的位(点)图.
这种将页面渲染成大型位图(<code>bitmap</code>)的过程有个通用名称作光栅图像处理器(<code>raster image processor</code>),又叫 <code>RIP</code>.
多年之后,电脑和网络都变得更快了.这使得 <code>RIP</code> 技术从打印机转移到了主机上,还让高品质打印机变得更便宜了.</p>
<p>现在的许多打印机仍能接受基于字符的字节流,但很多廉价的打印机却不支持,因为它们依赖于主机的 <code>RIP</code> 提供的比特流来作为点阵打印.当然也有不少仍旧是 <code>PostScript</code> 打印机.</p>
<h3 id="在-linux-下打印"><a class="header" href="#在-linux-下打印">在 Linux 下打印</a></h3>
<p>当前 <code>Linux</code> 系统采用两套软件配合显示和管理打印.
第一,<code>CUPS</code>(<code>Common Unix Printing System</code>,一般<code>Unix</code> 打印系统),用于提供打印驱动和打印任务管理;
第二,<code>Ghostscript</code>,一种 <code>PostScript</code> 解析器,作为 <code>RIP</code>使用.</p>
<p><code>CUPS</code> 通过创建并维护打印队列来管理打印机.如前所述,<code>Unix</code> 下的打印原本是设计成多用户共享中央打印机的管理模式的.
由于打印机本身比连接到它的电脑要慢,打印系统就需要对打印任务进行调度使其保持顺序.</p>
<p><code>CUPS</code> 还能识别出不同类型的数据(在合理范围内)并转换文件为可打印的格式.</p>
<h3 id="为打印准备文件"><a class="header" href="#为打印准备文件">为打印准备文件</a></h3>
<p>作为命令行用户,尽管打印各种格式的文本都能实现,不过打印最多的,还是文本.</p>
<h4 id="pr---转换需要打印的文本文件"><a class="header" href="#pr---转换需要打印的文本文件">pr - 转换需要打印的文本文件</a></h4>
<p>前面的章节我们也有提到过 <code>pr</code> 命令,现在我们来探讨一下这条命令结合打印使用的一些选项.
我们知道,在打印的历史上,基于字符的打印机曾经用过等宽字体,致使每页只能打印固定的行数和字符数,而 pr 命令则能够根据不同的页眉和页边距排列文本使其适应指定的纸张.
表<code>23-1</code>总结了最常用的选项.
选项 描述</p>
<ul>
<li><code>+first[:last]</code>:  输出从 <code>first</code> 到 <code>last</code>(默认为最后)范围内的页面.</li>
<li><code>-columns</code>:  根据 <code>columns</code> 指定的列数排版页面内容.</li>
<li><code>-a</code> 默认多列输出为垂直,用 <code>-a</code> (<code>across</code>)可使其水平输出.</li>
<li><code>-d</code> 双空格输出.</li>
<li><code>-D</code> <code>format</code> 用 <code>format</code> 指定的格式修改页眉中显示的日期,日期命令中 <code>format</code> 字符串的描述详见参考手册.</li>
<li><code>-f</code> 改用换页替换默认的回车来分割页面.</li>
<li><code>-h header</code> 在页眉中部用 <code>header</code> 参数替换打印文件的名字.</li>
<li><code>-l length</code> 设置页长为 <code>length</code>,默认为<code>66</code>行(每英寸<code>6</code>行的美国信纸).</li>
<li><code>-n</code> 输出行号.</li>
<li><code>-o offset</code> 创建一个宽 <code>offset</code> 字符的左页边.</li>
<li><code>-w width</code> 设置页宽为 <code>width</code>,默认为<code>72</code>字符.</li>
</ul>
<p>我们通常用管道配合 <code>pr</code> 命令来做筛选.下面的例子中我们会列出目录 <code>/usr/bin</code> 并用 <code>pr</code> 将其格式化为<code>3</code>列输出的标题页:</p>
<pre><code class="language-bash">[me@linuxbox ~]$ ls /usr/bin | pr -3 -w 65 | head
2012-02-18 14:00
...
</code></pre>
<h3 id="将打印任务送至打印机"><a class="header" href="#将打印任务送至打印机">将打印任务送至打印机</a></h3>
<p><code>CUPS</code> 打印体系支持两种曾用于类 <code>Unix</code> 系统的打印方式.一种,叫 <code>Berkeley</code> 或 <code>LPD</code>(用于 <code>Unix</code> 的 <code>Berkeley</code>软件发行版),使用 <code>lpr</code> 程序;
另一种,叫 <code>SysV</code>(源自 <code>System V</code> 版本的 <code>Unix</code>),使用 <code>lp</code> 程序.</p>
<p>这两个程序的功能大致相同.具体使用哪个完全根据个人喜好.</p>
<h4 id="lpr---打印文件berkeley-风格"><a class="header" href="#lpr---打印文件berkeley-风格">lpr - 打印文件(Berkeley 风格)</a></h4>
<p><code>lpr</code> 程序可以用来把文件传送给打印机.由于它能接收标准输入,所以能用管道来协同工作.例如,要打印刚才多列目录列表的结果,我们只需这样:</p>
<pre><code class="language-bash">[me@linuxbox ~]$ ls /usr/bin | pr -3 | lpr
</code></pre>
<p>报告会送到系统默认的打印机,如果要送到别的打印机,可以使用 <code>-P</code> 参数: <code>lpr -P printer_name</code></p>
<p><code>printer_name</code> 表示这台打印机的名称.若要查看系统已知的打印机列表:</p>
<pre><code class="language-bash">[me@linuxbox ~]$ lpstat -a
</code></pre>
<p>注意: 许多 <code>Linux</code> 发行版允许你定义一个输出 <code>PDF</code> 文件但不执行实体打印的<code>打印机</code>,这可以用来很方便的检验你的打印命令.
在某些发行版中,你可能要自己安装额外的软件包(如<code> cups-pdf</code>)来使用这项功能. <code>Ubuntu</code> 中需要安装<code>printer-driver-cups-pdf</code></p>
<p>表23-2: 常用 <code>lpr</code> 选项
选项 描述</p>
<ul>
<li><code>-# number</code>:  设定打印份数为 <code>number</code>.</li>
<li><code>-p</code>: 使每页页眉标题中带有日期, 时间, 工作名称和页码.这种所谓的<code>美化打印</code>选项可用于打印文本文件.</li>
<li><code>-P printer</code>: 指定输出打印机的名称.未指定则使用系统默认打印机.</li>
<li><code>-r</code>: 打印后删除文件.对程序产生的临时打印文件较为有用.</li>
<li><code>lp</code>: 打印文件(<code>System V</code> 风格)</li>
</ul>
<p>和 <code>lpr</code> 一样,<code>lp</code> 可以接收文件或标准输入为打印内容.与 <code>lpr</code> 不同的是 <code>lp</code> 支持不同的选项(略为复杂)</p>
<p>表23-3: 常用 lp 选项
选项 描述</p>
<ul>
<li><code>-d printer</code> 设定目标(打印机)为 <code>printer</code>.若<code>d</code>选项未指定,则使用系统默认打印机.</li>
<li><code>-n number</code> 设定的打印份数为 <code>number</code>.</li>
<li><code>-o landscape</code> 设置输出为横向.</li>
<li><code>-o fitplot</code> 缩放文件以适应页面.打印图像时较为有用,如 <code>JPEG</code> 文件.</li>
<li><code>-o scaling=number</code>: 缩放文件至 <code>number</code>.<code>100</code>表示填满页面,小于<code>100</code>表示缩小,大于<code>100</code>则会打印在多页上.</li>
<li><code>-o cpi=number</code>: 设定输出为 <code>number</code> 字符每英寸.默认为<code>10</code>.</li>
<li><code>-o lpi=number</code>: 设定输出为 <code>number</code> 行每英寸,默认为<code>6</code>.</li>
<li><code>-o page-bottom=points</code>:</li>
<li><code>-o page-left=points</code>:</li>
<li><code>-o page-right=points</code>:</li>
<li><code>-o page-top=points</code>: 这些选项用来设置页边距,单位为<code>点</code>,一种印刷上的单位.一英寸 <code>=72点</code>.</li>
<li><code>-P pages</code>: 指定打印的页面.<code>pages</code> 可以是逗号分隔的列表或范围--例如 <code>1,3,5,7-10</code>.</li>
</ul>
<p>再次打印我们的目录列表,这次我们设置<code>12 CPI</code>, <code>8 LPI</code> 和一个半英寸的左边距.注意这里我必须调整 <code>pr</code> 选项来适应新的页面大小:</p>
<pre><code class="language-bash">[me@linuxbox ~]$ ls /usr/bin | pr -4 -w 90 -l 88 | lp -o page-left=36 -o cpi=12 -o lpi=8
</code></pre>
<p>这条命令用小于默认的格式产生了一个四列的列表.增加 <code>CPI</code> 可以让我们在页面上打印更多列.</p>
<h4 id="另一种选择-a2ps"><a class="header" href="#另一种选择-a2ps">另一种选择: a2ps</a></h4>
<p><code>a2ps</code> 程序很有趣.单从名字上看,这是个格式转换程序,但它的功能不止于此.程序名字的本意为 <code>ASCII toPostScript</code>,它是用来为 <code>PostScript</code> 打印机准备要打印的文本文件的.
多年后,程序的功能得到了提升,名字的含义也变成了 <code>Anything to PostScript</code>.尽管名为格式转换程序,但它实际的功能却是打印.
它的默认输出不是标准输出,而是系统的默认打印机.程序的默认行为被称为<code>漂亮的打印机</code>,这意味着它可以改善输出的外观.
我们能用程序在桌面上创建一个 <code>PostScript</code> 文件:</p>
<pre><code class="language-bash">[me@linuxbox ~]$ ls /usr/bin | pr -3 -t | a2ps -o ~/Desktop/ls.ps -L 66
[stdin (plain): 11 pages on 6 sheets]
</code></pre>
<p>这里我们用带 <code>-t</code> 参数(忽略页眉和页脚)的 <code>pr</code> 命令过滤数据流,然后用 <code>a2ps</code> 指定一个输出文件(<code>-o</code> 参数),并设定每页<code>66</code>行(<code>-L</code> 参数)来匹配 <code>pr</code> 的输出分页.
用合适的文件查看器查看我们的输出文件, 可以看到,默认的输出布局是一面两页的,这将导致两页的内容被打印到一张纸上.<code>a2ps</code> 还能利用页眉和页脚.</p>
<p><code>a2ps</code> 有很多选项,总结在表23-4中.
选项 描述</p>
<ul>
<li><code>--center-title text </code>:设置中心页标题为 <code>text</code>.</li>
<li><code>--columns number</code>: 将所有页面排列成 <code>number</code> 列.默认为<code>2</code>.</li>
<li><code>--footer text</code>: 设置页脚为 <code>text</code>.</li>
<li><code>--guess</code>: 报告参数中文件的类型.由于 <code>a2ps</code> 会转换并格式化所有类型的数据,所以当给定文件类型后,这个选项可以很好的用来判断 <code>a2ps</code> 应该做什么.</li>
<li><code>--left-footer text</code>: 设置左页脚为 <code>text</code>.</li>
<li><code>--left-title text</code>: 设置页面左标题为 <code>text</code>.</li>
<li><code>--line-numbers=interval</code>: 每隔 <code>interval</code> 行输出行号.</li>
<li><code>--list=defauls</code>: 显示默认设置.</li>
<li><code>--list=topic</code>:  显示 <code>topic</code> 设置,<code>topic</code> 表示下列之一:
代理程序(用来转换数据的外部程序),编码,特征,变量,媒介(页面大小等),<code>ppd</code>(<code>PostScript</code> 打印机描述信息),打印机,起始程序(为常规输出添加前缀的代码部分),样式表,或用户选项.</li>
<li><code>--pages range</code>: 打印 <code>range</code> 范围内的页面.</li>
<li><code>--right-footer text</code>: 设置右页脚为 <code>text</code>.</li>
<li><code>--right-title text</code>: 设置页面右标题为 <code>text</code>.</li>
<li><code>--rows number</code>: 将所有页面排列成 <code>number</code> 排.默认为<code>1</code>.</li>
<li><code>-B</code>: 没有页眉.</li>
<li><code>-b text</code>: 设置页眉为 <code>text</code>.</li>
<li><code>-f size</code>: 使用字体大小为 <code>size</code> 号.</li>
<li><code>-l number</code>: 设置每行字符数为 <code>number</code>.此项和 <code>-L</code>选项(见下方)可以给文件用其他程序来更准确的分页,如 <code>pr</code>.</li>
<li><code>-L number</code>: 设置每页行数为 <code>number</code>.</li>
<li><code>-M name</code>: 使用打印媒介的名称 -- 例如,<code>A4</code>.</li>
<li><code>-n number</code>: 每页输出 <code>number</code> 份.</li>
<li><code>-o file</code>: 输出到文件 <code>file</code>.如果指定为 <code>-</code> ,则输出到标准输出.</li>
<li><code>-P printer</code>: 使用打印机 <code>printer</code>.如果未指定,则使用系统默认打印机.</li>
<li><code>-R</code>: 纵向打印.</li>
<li><code>-r</code>: 横向打印.</li>
<li><code>-T number</code>: 设置制表位为每 <code>number</code> 字符.</li>
<li>``:-u text<code>: 用 </code>text` 作为页面底图(水印).</li>
</ul>
<p>以上只是对 <code>a2ps</code> 的总结,更多的选项尚未列出.
注意: <code>a2ps</code> 目前仍在不断的开发中.就我的测试而言,不同版本之间都多少有所变化.
另外,我们也要注意到另一个转换文本为 <code>PostScript</code> 的输出格式化工具,名叫 <code>enscript</code>.它具有许多相同的格式化和打印功能,但和 <code>a2ps</code> 唯一的不同在于,它只能处理纯文本的输入.</p>
<h3 id="监视和控制打印任务"><a class="header" href="#监视和控制打印任务">监视和控制打印任务</a></h3>
<p>由于 <code>Unix</code> 打印系统的设计是能够处理多用户的多重打印任务,<code>CUPS</code> 也是如此设计的.每台打印机都有一个打印队列,其中的任务直到传送到打印机才停下并进行打印.
<code>CUPS</code> 支持一些命令行程序来管理打印机状态和打印队列. 像<code>lpr</code> 和 <code>lp</code> 这样的管理程序都是以 <code>Berkeley</code> 和 <code>System V</code> 打印系统的相应程序为依据进行排列的.</p>
<h4 id="lpstat---显示打印系统状态"><a class="header" href="#lpstat---显示打印系统状态">lpstat - 显示打印系统状态</a></h4>
<p><code>lpstat</code> 程序可用于确定系统中打印机的名字和有效性.例如,我们系统中有一台实体打印机(名叫 <code>printer</code>)和一台 <code>PDF</code> 虚拟打印机(名叫 <code>PDF</code>),我们可以像这样查看打印机状态:</p>
<pre><code class="language-bash">[me@linuxbox ~]$ lpstat -a
PDF accepting requests since Mon 05 Dec 2011 03:05:59 PM EST
printer accepting requests since Tue 21 Feb 2012 08:43:22 AM EST
</code></pre>
<p>接着,我们可以查看打印系统更具体的配置信息:</p>
<pre><code class="language-bash">[me@linuxbox ~]$ lpstat -s
system default destination: printer
device for PDF: cups-pdf:/
device for printer: ipp://print-server:631/printers/printer
</code></pre>
<p>上例中,我们看到 <code>printer</code> 是系统默认的打印机,其本身是一台网络打印机,使用网络打印协议(<code>ipp://</code>)通过网络连接到名为 <code>print-server</code> 的系统.</p>
<p>lpstat 的常用选项列于表23-5.
选项 描述</p>
<ul>
<li><code>-a [printer...] </code>: 显示 <code>printer</code> 打印机的队列.这里显示的状态是打印机队列承受任务的能力,而不是实体打印机的状态.若未指定打印机,则显示所有打印队列.</li>
<li><code>-d</code>: 显示系统默认打印机的名称.</li>
<li><code>-p [printer...] </code>: 显示 <code>printer</code> 指定的打印机的状态.若未指定打印机,则显示所有打印机状态.</li>
<li><code>-r</code>: 显示打印系统的状态.</li>
<li><code>-s</code>: 显示汇总状态.</li>
<li><code>-t</code>: 显示完整状态报告.</li>
</ul>
<h4 id="lpq---显示打印机队列状态"><a class="header" href="#lpq---显示打印机队列状态">lpq - 显示打印机队列状态</a></h4>
<p>使用 <code>lpq</code> 程序可以查看打印机队列的状态,从中我们可以看到队列的状态和所包含的打印任务.下面的例子显示了一台名叫 <code>printer</code> 的系统默认打印机包含一个空队列的情况:</p>
<pre><code class="language-bash">[me@linuxbox ~]$ lpq
printer is ready
no entries
</code></pre>
<p>如果我们不指定打印机(用 <code>-P</code> 参数),就会显示系统默认打印机.如果给打印机添加一项任务再查看队列,我们就会看到下列结果:</p>
<pre><code class="language-bash">[me@linuxbox ~]$ ls *.txt | pr -3 | lp
request id is printer-603 (1 file(s))
[me@linuxbox ~]$ lpq
printer is ready and printing
...
</code></pre>
<h3 id="lprm-和-cancel---取消打印任务"><a class="header" href="#lprm-和-cancel---取消打印任务">lprm 和 cancel - 取消打印任务</a></h3>
<p><code>CUPS</code> 提供两个程序来从打印队列中终止并移除打印任务.一个是 <code>Berkeley</code> 风格的(<code>lprm</code>),另一个是 <code>SystemV</code> 的(<code>cancel</code>).
在支持的选项上两者有较小的区别但是功能却几乎相同.以上面的打印任务为例,我们可以像这样终止并移除任务:</p>
<pre><code class="language-bash">[me@linuxbox ~]$ cancel 603
[me@linuxbox ~]$ lpq
printer is ready
no entries
</code></pre>
<p>每个命令都有选项可用于移除某用户,某打印机或多个任务号的所有任务,相应的参考手册中都有详细的介绍.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="linux-7-text-operation.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="manjaro.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="linux-7-text-operation.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="manjaro.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
