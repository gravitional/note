# 第十八章:查找文件

因为我们已经浏览了 Linux 系统,所以一件事已经变得非常清楚:一个典型的 Linux 系统包含很多文件!
这就引发了一个问题,`我们怎样查找东西?`.

虽然我们已经知道 Linux 文件系统良好的组织结构,是源自 类 Unix的操作系统代代传承的习俗.
但是仅文件数量就会引起可怕的问题.

在这一章中,我们将察看 两个用来在系统中查找文件的工具.这些工具是:

+ `locate` – 通过名字来查找文件
+ `find` – 在目录层次结构中搜索文件

我们也将看一个经常与文件搜索命令一起使用的命令,它用来处理搜索到的文件列表:

+ `xargs` – 从标准输入生成和执行命令行

另外,我们将介绍两个命令来协助我们探索:

+ `touch` – 更改文件时间
+ `stat` – 显示文件或文件系统状态

### locate - 查找文件的简单方法

这个 `locate` 程序快速搜索路径名数据库,并且输出每个与给定字符串相匹配的文件名.
比如说, 例如,我们想要找到所有名字以`zip`开头的程序.
因为我们正在查找程序,可以假定包含 匹配程序的目录以`bin/`结尾.
因此,我们试着以这种方式使用 `locate` 命令,来找到我们的文件:

```bash
$ locate bin/zip
```

`locate` 命令将会搜索它的路径名数据库,输出任一个包含字符串`bin/zip`的路径名:

```bash
/usr/bin/zip
/usr/bin/zipcloak
...
```

如果搜索要求没有这么简单,`locate` 可以结合其它工具,比如说 `grep` 命令,来设计更加 有趣的搜索:

```bash
$ locate zip | grep bin
/bin/bunzip2
/bin/bzip2
...
```

这个 `locate` 程序已经存在了很多年了,它有几个不同的变体被普遍使用着.

在现在 Linux 发行版中发现的两个最常见的变体是 `slocate` 和 `mlocate`,但是通常它们被名为 `locate` 的 符号链接访问.
不同版本的 locate 命令拥有重复的选项集合.
一些版本包括正则表达式 匹配(我们会在下一章中讨论)和通配符支持.
查看 locate 命令的手册,从而确定安装了 哪个版本的 locate 程序.

### locate 数据库来自何方

你可能注意到了,在一些发行版中,仅仅在系统安装之后,`locate` 不能工作, 但是如果你第二天再试一下,它就工作正常了.

怎么回事呢?`locate` 数据库由另一个叫做 `updatedb` 的程序创建.
通常,这个程序作为一个 `cron` 工作例程周期性运转;也就是说,一个任务 在特定的时间间隔内被 `cron` 守护进程执行.
大多数装有`locate` 的系统会每隔一天运行一回 `updatedb` 程序.
因为数据库不能被持续地更新,所以当使用 `locate` 时,你会发现 目前最新的文件不会出现.
为了克服这个问题,可以手动运行 `updatedb` 程序, 更改为超级用户身份,在提示符下运行 `updatedb` 命令.

拓展阅读

程序 locate,`updatedb`,find 和 xargs 都是 GNU 项目 findutils 软件包的一部分.
这个 GUN 项目提供了大量的在线文档,这些文档相当出色,如果你在高安全性的 环境中使用这些程序,你应该读读这些文档.
[http://www.gnu.org/software/findutils/](http://www.gnu.org/software/findutils/)
